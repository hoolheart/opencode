# 产品需求文档（PRD）编写指南

## 目录
1. [PRD 目的与定义](#prd-目的与定义)
2. [PRD 结构与章节](#prd-结构与章节)
3. [用户故事编写指南](#用户故事编写指南)
4. [编写最佳实践](#编写最佳实践)
5. [评审与审批流程](#评审与审批流程)
6. [PRD 模板示例](#prd-模板示例)

---

## PRD 目的与定义

### 什么是 PRD？
产品需求文档（Product Requirements Document，简称 PRD）是一份全面的文档，用于定义产品的需求、功能、特性和行为。它是需要构建什么以及为什么构建的唯一真实来源。

### PRD 的目的
- **对齐利益相关者**：确保所有人（产品、工程、设计、QA、业务）保持一致的理解
- **指导开发**：为工程团队提供清晰的方向
- **支持决策制定**：协助优先级排序和范围管理
- **减少歧义**：最小化误解和返工
- **跟踪进度**：作为测试和验证的参考

### 何时创建 PRD
- 新产品开发
- 重要功能添加
- 重大产品变更或重构
- 需要协调的跨职能项目

---

## PRD 结构与章节

### 1. 文档头部
```
标题：[产品/功能名称]
版本：[X.Y.Z]
日期：[YYYY-MM-DD]
作者：[产品负责人姓名]
状态：[草稿/评审中/已批准/已废弃]
```

### 2. 执行摘要
简要概述（2-3 段），包括：
- 正在构建什么
- 为什么重要（业务背景）
- 预期成果
- 关键利益相关者

### 3. 目标与目的

#### 业务目标
- 我们要解决什么业务问题？
- 我们要抓住什么机会？
- 预期业务影响（收入、用户、效率等）

#### 产品目标
- 我们要解决什么用户问题？
- 这如何符合产品愿景？
- 成功标准是什么？

#### SMART 目标框架
- **S**pecific（具体的）：清晰明确
- **M**easurable（可衡量的）：可量化的结果
- **A**chievable（可实现的）：在给定约束下可实现
- **R**elevant（相关的）：与业务战略一致
- **T**ime-bound（有时限的）：明确的时间线

### 4. 范围外事项（Out of Scope）
明确定义本 PRD 中**不包含**的内容，以防止范围蔓延和管理预期。

**模板：**
```markdown
## 范围外事项

本次发布明确排除以下项目：

| 项目 | 原因 | 未来考虑 |
|------|------|----------|
| [功能 X] | [排除原因] | [可能添加的时间] |
| [集成 Y] | [技术限制] | [2024年Q3] |
| [平台 Z] | [资源限制] | [下一阶段] |

### 范围边界
- ✅ 范围内：[包含的具体功能]
- ❌ 范围外：[排除的具体功能]
- 🔄 未来阶段：[推迟到未来版本的项目]
```

**最佳实践：**
- 对排除项要具体
- 为每个排除项提供理由
- 指明何时可能重新考虑排除项
- 与利益相关者确认一致性

### 5. 假设
记录在 PRD 创建过程中所做的所有假设。这些假设应在整个项目生命周期中进行验证。

**模板：**
```markdown
## 假设

### 业务假设
| ID | 假设 | 验证方法 | 负责人 | 截止日期 | 状态 |
|----|------|----------|--------|----------|------|
| BA-01 | [假设内容] | [验证方式] | [姓名] | [日期] | 待验证/已验证/已证伪 |
| BA-02 | 用户将在30天内采用该功能 | 用户验收测试 | 产品 | 2024-02-15 | 待验证 |

### 技术假设
| ID | 假设 | 验证方法 | 负责人 | 截止日期 | 状态 |
|----|------|----------|--------|----------|------|
| TA-01 | API延迟将保持在100ms以下 | 负载测试 | 工程 | 2024-02-01 | 待验证 |
| TA-02 | 第三方服务可用性 > 99.9% | SLA审查 | 运维 | 2024-01-30 | 待验证 |

### 用户假设
| ID | 假设 | 验证方法 | 负责人 | 截止日期 | 状态 |
|----|------|----------|--------|----------|------|
| UA-01 | 用户偏好移动端而非桌面端 | 数据分析审查 | 用户研究 | 2024-02-10 | 待验证 |
| UA-02 | 该功能将减少20%的客服工单 | 上线后分析 | 客服 | 2024-03-01 | 待验证 |

### 验证清单
- [ ] 开发前验证所有关键假设
- [ ] 将假设风险记录在风险登记册中
- [ ] 为高风险假设制定备用计划
- [ ] 确保利益相关者了解假设依赖
```

### 6. 用户画像

使用以下格式定义目标用户：

```markdown
### 画像：[名称]
- **角色**：[职位/角色]
- **人口统计**：[年龄范围、地区、行业]
- **目标**：[他们想要实现什么]
- **痛点**：[当前的挫折]
- **行为**：[他们当前的工作方式]
- **技术熟练度**：[初级/中级/高级]
- **语录**：[代表性陈述]
```

**最佳实践：**
- 最多创建 2-4 个主要画像
- 基于真实用户研究制定画像
- 包括主要和次要用户
- 随着了解更多信息更新画像

#### 待完成工作（JTBD）vs 用户画像

画像描述**用户是谁**，而JTBD关注**用户想要完成什么**。

| 方面 | 用户画像 | JTBD |
|------|----------|------|
| **关注点** | 用户特征、人口统计、行为 | 用户的"工作"或目标 |
| **格式** | "Sarah，35岁，营销经理..." | "当我在[情境]时，我想要[动机]，以便[预期结果]" |
| **适用于** | 了解用户场景和偏好 | 了解功能需求和创新 |
| **何时使用** | 为特定用户类型设计 | 解决问题或创建新解决方案 |

**JTBD格式：**
```
当我在[情境/上下文]时，
我想要[动机/意图]，
以便我可以[预期结果]。
```

**示例：**
```
用户画像："作为项目经理，我想要..."

JTBD："当我为客户演示做准备时，我想要快速生成
项目里程碑的可视化报告，以便我可以在无需花费数小时
格式化数据的情况下展示进展。"
```

**建议：** 使用用户画像来了解你的用户，使用JTBD来了解他们需要完成什么。结合两者可以获得强大的洞察力。

### 7. 用户故事

#### 5W1H 框架（基于5W1H方法）
每个用户故事都应该回答这六个问题，基于经典的5W1H（何人、何时、何地、何事、为何、如何）问题解决方法：

| 要素 | 问题 | 描述 | 5W1H映射 |
|------|------|------|----------|
| **何人（Who）** | 用户是谁？ | 画像或用户类型 | **W**ho |
| **何时（When）** | 何时发生？ | 上下文或触发条件 | **W**hen |
| **何地（Where）** | 发生在哪里？ | 环境或平台 | **W**here |
| **何事（What）** | 他们采取什么行动？ | 具体功能 | **W**hat |
| **为何（Why）** | 他们为什么需要这个？ | 目标或动机 | **W**hy |
| **如何（How）** | 我们如何定义成功？ | 验收标准/质量标准 | **H**ow |

> **注意：** 5W1H方法（五个W和一个H）是新闻、研究和问题解决方法中使用的提问方法，用于收集全面信息。我们已将其专门适配用于用户故事编写。

#### 经典格式（Atlassian 风格）
```
作为[谁]，我想要[做什么]，以便[为什么]。
```

#### 扩展 5W1H 格式
```
作为[谁]，当[何时]，在[何地]，我想要[做什么]，
以便[为什么]。成功标准是[如何]。
```

#### 示例：
```
经典格式：作为项目经理，我想要将报告导出为 PDF，
以便与没有系统访问权限的利益相关者分享。

5W1H扩展格式：作为项目经理（谁），在查看月度进度时（何时），
在 Web 仪表盘中（何地），我想要将报告导出为 PDF（何事），
以便与没有系统访问权限的利益相关者分享（为何）。
成功标准是：导出在 5 秒内生成格式正确的 PDF，
包含所有图表数据，并在不同设备上保持格式一致（如何）。
```

### 8. 功能需求

按功能或史诗组织：

```markdown
### 功能：[功能名称]
**优先级**：[必须有/应该有/可以有/不会有]
**负责人**：[产品负责人/团队]

#### 描述
[功能的详细描述]

#### 用户故事
[与此功能相关的用户故事列表]

#### 功能规格
- 需求 1：[详细描述]
- 需求 2：[详细描述]

#### 业务规则
- 规则 1：[业务逻辑或约束]
- 规则 2：[业务逻辑或约束]

#### 边界情况
- 边界情况 1：[描述和预期行为]
- 边界情况 2：[描述和预期行为]
```

### 9. 非功能需求

定义系统质量：

#### 性能
- 响应时间要求（例如：页面加载 < 2 秒）
- 吞吐量（例如：支持 1000 个并发用户）
- 资源使用（例如：内存、CPU）

#### 安全性
- 认证要求
- 授权级别
- 数据加密标准
- 合规性（GDPR、SOC2 等）

#### 可靠性
- 可用性要求（例如：99.9% SLA）
- 恢复时间目标（RTO）
- 恢复点目标（RPO）

#### 可扩展性
- 用户增长预测
- 数据量预期
- 水平/垂直扩展需求

#### 可用性
- 无障碍标准（WCAG 2.1 AA）
- 浏览器/设备支持矩阵
- 本地化要求

#### 可维护性
- 代码文档要求
- API 版本控制策略
- 技术债务考虑

### 10. 数据与分析需求

定义数据跟踪、事件埋点和分析需求。

#### 事件跟踪需求
```markdown
### 用户事件
| 事件名称 | 触发条件 | 属性 | 优先级 |
|----------|----------|------|--------|
| feature_used | 用户点击功能按钮 | user_id, timestamp, feature_name, session_id | 必需 |
| export_completed | 导出成功完成 | user_id, file_type, file_size, duration_ms | 必需 |
| error_occurred | 操作期间出错 | user_id, error_code, error_message, context | 必需 |

### 系统事件
| 事件名称 | 触发条件 | 属性 | 优先级 |
|----------|----------|------|--------|
| api_latency | 收到API响应 | endpoint, duration_ms, status_code | 必需 |
| database_query | 查询执行 | query_type, duration_ms, rows_returned | 可选 |
```

#### 指标埋点
```markdown
### 业务指标
- **指标**：[指标名称]
  - **定义**：[明确定义]
  - **计算方式**：[如何计算]
  - **目标**：[目标值]
  - **报告频率**：[每日/每周/每月]

### 产品指标
- **指标**：功能采用率
  - **定义**：在功能可用后7天内使用该功能的活跃用户百分比
  - **计算方式**：（使用功能的用户 / 总活跃用户）× 100
  - **目标**：首月内 >30%
  - **报告频率**：每周

### 技术指标
- **指标**：API响应时间P95
  - **定义**：第95百分位响应时间
  - **目标**：<200ms
  - **告警阈值**：>500ms
```

#### 仪表板需求
```markdown
### 产品仪表板
- **受众**：产品经理、高管
- **刷新频率**：实时
- **核心组件**：
  - 功能使用趋势（折线图，最近30天）
  - 用户满意度评分（仪表盘）
  - 转化漏斗（漏斗图）
  - 按端点的错误率（柱状图）

### 技术仪表板
- **受众**：工程、运维
- **刷新频率**：1分钟间隔
- **核心组件**：
  - API延迟百分位数（热力图）
  - 按服务的错误率（折线图）
  - 基础设施健康（状态网格）
  - 数据库性能（时间序列）
```

#### 数据隐私与合规
- PII处理要求
- 数据保留政策
- GDPR/CCPA对跟踪的合规性
- 用户同意管理

### 11. 设计考虑

#### 用户体验
- 用户旅程地图
- 关键用户流程
- 交互模式
- 错误处理方法

#### 视觉设计
- 设计系统参考
- 品牌指南
- UI 原型/线框图（链接）
- 响应式设计要求

#### 技术架构
- 高层架构图
- 集成点
- 第三方依赖
- API 规范

### 12. 时间线与路线图

```markdown
### 第一阶段：MVP（第 1-2 个月）
- 功能 A
- 功能 B
- 成功标准：[可衡量的结果]

### 第二阶段：增强功能（第 3-4 个月）
- 功能 C
- 功能 D
- 成功标准：[可衡量的结果]

### 第三阶段：扩展和优化（第 5-6 个月）
- 功能 E
- 性能优化
- 成功标准：[可衡量的结果]
```

### 13. 成功指标

定义如何衡量成功：

#### 主要指标（北极星）
- 最重要的一个指标
- 直接与业务目标挂钩

#### 次要指标
- 支持性指标
- 健康度指标

#### 反向指标
- 用于观察负面影响的护栏指标

#### 测量计划
- 如何跟踪每个指标
- 基线测量值
- 目标值
- 报告频率

---

## 用户故事编写指南

### 良好用户故事的原则

#### INVEST 标准
每个用户故事都应该是：
- **I**ndependent（独立的）：可以独立开发
- **N**egotiable（可协商的）：细节可以讨论和完善
- **V**aluable（有价值的）：为用户带来明确价值
- **E**stimable（可估算的）：团队可以估算工作量
- **S**mall（小的）：可以在一个冲刺中完成
- **T**estable（可测试的）：有明确的验收标准

### 深入解析：5W1H 要素

#### 1. 何人（画像）
**关键问题：**
- 哪种用户类型从中受益？
- 他们的角色和上下文是什么？
- 是否有多种用户类型受影响？

**最佳实践：**
- 使用具体的画像名称，而不是泛指的"用户"
- 考虑主要和次要用户
- 如相关，包括系统参与者（例如："作为 API 消费者"）

**示例：**
- ❌ "作为一个用户..."（太模糊）
- ✅ "作为首次使用移动应用的用户..."（具体）
- ✅ "作为处理升级问题的客户支持代理..."（有上下文）

#### 2. 何时（上下文/触发条件）
**关键问题：**
- 什么触发这个需求？
- 用户在此操作之前处于什么状态？
- 这是否具有时效性？

**最佳实践：**
- 描述场景，而不仅仅是时间
- 如相关，包括前置条件
- 考虑频率（一次性 vs. 重复性）

**示例：**
- ❌ "当我想..."（太模糊）
- ✅ "当我完成购买并想要跟踪我的订单时..."
- ✅ "当我正在查看报告并需要与团队分享见解时..."

#### 3. 何地（环境）
**关键问题：**
- 在哪个平台/设备上？
- 在应用的哪个部分？
- 在线还是离线？

**最佳实践：**
- 指定平台（Web、iOS 移动、Android 移动、桌面）
- 如相关，提及应用中的位置
- 考虑跨平台需求

**示例：**
- ✅ "在 iOS 移动应用中，在仪表板屏幕上..."
- ✅ "在所有平台上，在设置部分..."
- ✅ "在浏览器扩展中，当查看产品页面时..."

#### 4. 何事（行动）
**关键问题：**
- 用户采取什么具体行动？
- 预期的系统响应是什么？
- 涉及哪些步骤？

**最佳实践：**
- 使用行动动词
- 具体说明功能
- 关注结果，而非实现

**示例：**
- ❌ "我想要一个导出按钮..."（实现细节）
- ✅ "我想要将数据导出为 Excel 格式..."（以结果为导向）
- ✅ "我想要按日期范围和类别筛选搜索结果..."

#### 5. 为何（目标/动机）
**关键问题：**
- 潜在需求是什么？
- 这提供什么价值？
- 这解决什么问题？

**最佳实践：**
- 超越显而易见
- 尽可能与业务价值联系
- 解释"那又怎样"

**示例：**
- ❌ "以便我能导出数据"（重复行动）
- ✅ "以便我可以在离线状态下分析趋势并向利益相关者展示发现"
- ✅ "以便我可以快速找到相关信息，而无需滚动浏览不相关的结果"

#### 6. 如何（验收标准/质量）
**关键问题：**
- 什么定义"完成"？
- 我们如何验证这能正常工作？
- 质量标准是什么？

**最佳实践：**
- 对复杂场景使用 Given-When-Then 格式
- 包括功能和非功能标准
- 使标准可测试和可衡量
- 覆盖正常路径和边界情况

**格式：**

**简单清单：**
```
验收标准：
- [ ] PDF 导出包含所有图表数据
- [ ] 导出在 5 秒内完成
- [ ] 文件在移动和桌面设备上格式正确
- [ ] 导出失败时显示错误消息
```

**Given-When-Then：**
```
场景：成功导出 PDF
假设我在报告页面
且报告包含数据
当我点击"导出为 PDF"
那么应该在 5 秒内下载 PDF 文件
且 PDF 应包含所有图表和表格
且格式应与屏幕显示匹配
```

**完成定义清单：**
```
此故事完成时：
- [ ] 代码已编写并评审
- [ ] 单元测试通过（覆盖率 > 80%）
- [ ] 集成测试通过
- [ ] QA 验证验收标准
- [ ] 文档已更新
- [ ] 已部署到测试环境
- [ ] 产品负责人批准
```

### 特殊故事类型

并非所有工作都适合标准用户故事格式。为这些特殊故事类型提供适当的文档：

#### 技术故事
使开发团队或系统受益但没有直接面向用户价值的工作。

```markdown
**类型**：技术故事
**标题**：[简要描述]

**背景**：[为什么需要这项技术工作]
**技术目标**：[我们试图实现什么]
**验收标准**：
- [ ] [技术标准 1]
- [ ] [技术标准 2]
- [ ] [技术标准 3]

**价值**：[这如何启用未来的用户价值]
**依赖**：[任何阻塞项]
```

**示例：**
```
类型：技术故事
标题：为产品目录API实现缓存层

背景：当前API调用在高峰流量期间耗时800ms+，
导致页面加载缓慢和用户体验差。

技术目标：通过为频繁访问的产品数据
实施Redis缓存来降低API响应时间。

验收标准：
- [ ] 缓存命中率 > 80%
- [ ] 缓存未命中响应时间 < 100ms
- [ ] 实现缓存失效策略
- [ ] 实现陈旧缓存回退机制
- [ ] 缓存性能监控告警

价值：实现200ms以下的页面加载，改善用户体验
和转化率。
```

#### 探索（研究/调查）
在实施前减少不确定性的限时研究。

```markdown
**类型**：探索
**标题**：[研究问题]
**时间盒**：[X 小时/天]

**问题**：[我们需要了解什么]
**背景**：[为什么需要这项研究]
**交付物**：
- [ ] [具体输出 1]
- [ ] [具体输出 2]
- [ ] 建议文档

**成功标准**：[我们如何知道探索已完成]
```

**示例：**
```
类型：探索
标题：评估第三方支付提供商
时间盒：3天

问题：哪个支付提供商最能满足我们的安全、
成本和功能要求？

背景：我们需要添加国际支付支持。
当前提供商不支持所有必需的货币。

交付物：
- [ ] 3个提供商的比较矩阵（Stripe、Adyen、Braintree）
- [ ] 安全合规评估
- [ ] 预计量的成本分析
- [ ] API集成复杂性评估
- [ ] 包含优缺点的建议文档

成功标准：团队可以对支付提供商做出明智决定。
```

#### 缺陷故事
需要修复的缺陷。

```markdown
**类型**：缺陷
**严重级别**：[严重/高/中/低]
**优先级**：[紧急/高/中/低]

**描述**：[什么问题坏了]
**复现步骤**：
1. [步骤 1]
2. [步骤 2]
3. [步骤 3]

**预期行为**：[应该发生什么]
**实际行为**：[实际发生了什么]
**环境**：[浏览器、操作系统、版本]
**验收标准**：
- [ ] [修复验证标准 1]
- [ ] [回归测试标准 2]
```

#### 研究/设计故事
开发前所需的UX研究或设计工作。

```markdown
**类型**：研究/设计
**标题**：[研究目标]

**目标**：[我们需要了解/设计什么]
**方法论**：[我们将如何进行研究]
**交付物**：
- [ ] [研究成果 1]
- [ ] [设计成果 2]

**验收标准**：
- [ ] 研究结果已记录
- [ ] 设计与利益相关者一起评审
- [ ] 向工程交接完成
```

### 故事拆分模式

当故事对于一个冲刺来说太大时，使用这些模式进行拆分，同时保持价值：

#### 1. 工作流步骤
当完整工作流太大时，按工作流中的步骤拆分。

```
原始：作为用户，我想要完成整个结账流程...

拆分为：
- 故事 1：输入配送信息
- 故事 2：选择支付方式
- 故事 3：查看并确认订单
```

#### 2. 业务规则变体
按不同的业务规则或条件拆分。

```
原始：作为管理员，我想要配置通知设置...

拆分为：
- 故事 1：配置邮件通知（MVP）
- 故事 2：配置短信通知（增强）
- 故事 3：配置推送通知（未来）
```

#### 3. 主路径 vs 边界情况
先实现主流程，然后处理边界情况。

```
原始：作为用户，我想要上传经过验证的文档...

拆分为：
- 故事 1：上传文档（主路径，仅有效文件）
- 故事 2：处理无效文件类型和大小
- 故事 3：处理上传错误和重试
```

#### 4. 简单 vs 复杂
先做基本版本，然后增强。

```
原始：作为用户，我想要带筛选器的高级搜索...

拆分为：
- 故事 1：基本关键词搜索
- 故事 2：添加类别筛选
- 故事 3：添加日期范围筛选
- 故事 4：添加高级筛选（多个条件）
```

#### 5. 平台拆分
当跨平台支持复杂时，按平台拆分。

```
原始：作为用户，我想要在所有平台上使用该功能...

拆分为：
- 故事 1：Web实现
- 故事 2：iOS实现
- 故事 3：Android实现
```

#### 6. 数据变体
按数据类型或来源拆分。

```
原始：作为用户，我想要从所有来源导入数据...

拆分为：
- 故事 1：从CSV导入
- 故事 2：从Excel导入
- 故事 3：通过API集成导入
```

#### 故事拆分检查清单
- [ ] 每个拆分的故事都提供独立的价值
- [ ] 每个故事都可估算（通常为1-8个故事点）
- [ ] 拆分不会在故事之间创建依赖
- [ ] 识别并优先考虑关键路径
- [ ] MVP版本交付核心用户价值

### 按类型分类的用户故事示例

#### 简单功能
```
作为经常购物的用户（谁），在浏览产品时（何时），
在移动应用产品页面上（何地），我想要看到预计送达日期（何事），
以便做出明智的购买决策（为何）。

验收标准：
- [ ] 每个配送选项都显示送达日期
- [ ] 日期基于当前库存和用户位置
- [ ] 如果用户更改地址，日期会动态更新
```

#### 复杂工作流
```
作为销售经理（谁），在准备季度评审时（何时），
在 CRM 分析仪表盘中（何地），我想要创建自定义销售报告，
可以按地区、产品线和时间段筛选（何事），
以便识别趋势并做出数据驱动的决策（为何）。

验收标准：
假设我可以访问分析仪表盘
当我选择"创建自定义报告"
那么我可以从可用数据字段中选择
并同时应用多个筛选条件
并保存报告配置供将来使用
并以 CSV 或 PDF 格式导出结果
```

#### 技术故事
```
作为系统管理员（谁），在监控系统健康状况时（何时），
在管理仪表盘中（何地），我想要在 API 响应时间超过 2 秒时
接收自动警报（何事），
以便在问题影响用户之前主动解决性能问题（为何）。

验收标准：
- [ ] 当第 95 百分位响应时间 > 2 秒持续 5 分钟时触发警报
- [ ] 警报包括端点、响应时间和时间戳
- [ ] 警报通过电子邮件和 Slack 发送
- [ ] 可以确认和静音警报
```

#### 带依赖的真实世界复杂示例
```
故事：跨平台通知系统

作为项目团队成员（谁），当项目状态变更时（何时），
在 Web、iOS 和 Android 平台（何地），我想要接收
关于任务分配和更新的实时通知（何事），
以便我可以随时了解并立即响应，无论使用什么设备（为何）。

依赖：
- 需要：用户认证系统（AUTH-123）- 必须先完成
- 需要：推送通知基础设施（INFRA-456）- 可并行运行
- 阻塞：移动离线模式功能（MOBILE-789）- 可在通知核心完成后开始

平台特定验收标准：

Web：
- [ ] 标签页不活动时显示浏览器通知
- [ ] 通知出现在通知中心
- [ ] 点击通知导航到相关页面

iOS：
- [ ] 应用处于后台时显示推送通知
- [ ] 深层链接从通知打开正确屏幕
- [ ] 通知中心中按项目分组通知

Android：
- [ ] 带有操作按钮的推送通知（标记为已读、回复）
- [ ] 为 Android 8+ 配置通知渠道
- [ ] 应用内可访问通知历史

跨平台：
- [ ] 通知偏好跨设备同步
- [ ] 已读状态实时同步
- [ ] 支持@提及的不同告警级别

发布阶段：
阶段 1：Web通知（冲刺1）
阶段 2：iOS通知（冲刺2）
阶段 3：Android通知 + 跨平台同步（冲刺3）
```

#### 带A/B测试的真实世界示例
```
故事：A/B测试 - 新结账流程

作为产品团队（谁），在Q2优化计划中（何时），
在支付流程中（何地），我们想要测试简化的2步结账
与当前的5步结账（何事），
以确定减少摩擦是否会提高转化率（为何）。

实验设计：
- 假设：将结账步骤从5步减少到2步将使转化率提高15%
- 对照组：50%的用户看到当前5步结账
- 实验组：50%的用户看到新2步结账
- 持续时间：2周或直到统计显著性（p < 0.05）
- 成功指标：结账完成率

验收标准：
- [ ] 为渐进式发布实施功能标志系统
- [ ] 用户随机分配到对照组或实验组
- [ ] 分配跨会话保持（同一用户始终看到相同版本）
- [ ] 所有结账事件都带有实验变体进行跟踪
- [ ] 对照组和实验组功能相同（相同支付方式）
- [ ] 如果检测到问题，可在5分钟内回滚

分析需求：
- 跟踪：结账开始、步骤完成、放弃、完成
- 跟踪：每个步骤花费的时间
- 跟踪：按步骤的错误率
- 跟踪：每笔交易收入（护栏指标）
- 仪表板：按变体的实时转化漏斗

发布标准：
- 达到统计显著性 OR
- 2周过去且没有关键问题 OR
- 实验组显示>20%的负面影响（提前终止）

实验后：
- 获胜者在48小时内部署给100%的用户
- 失败者代码在随后的冲刺中删除
- 结果记录在实验仓库中
```

---

## 编写最佳实践

### 语言和清晰度

#### 使用清晰、简单的语言
- ❌ "系统应促进用户进行数据导出..."
- ✅ "用户可以导出他们的数据..."

#### 具体明确
- ❌ "应用应该很快"
- ✅ "在 4G 连接下，页面应在 2 秒内加载"

#### 避免歧义
- ❌ "系统应处理大量用户"
- ✅ "系统应支持 10,000 个并发用户，响应时间 <3 秒"

#### 使用主动语态
- ❌ "报告可以被用户导出"
- ✅ "用户可以导出报告"

### 验收标准格式

#### 结构选项

**选项 1：要点列表**
最适合具有明确标准的简单故事。
```
验收标准：
- [ ] 用户可以选择日期范围
- [ ] 结果立即更新
- [ ] 无效日期显示错误消息
```

**选项 2：Given-When-Then（Gherkin）**
最适合具有多个条件的复杂场景。
```
场景：有效登录
假设我在登录页面
且我有有效账户
当我输入正确的凭据
并点击"登录"
那么我应该被重定向到仪表盘
并看到欢迎消息
```

**选项 3：基于规则**
最适合业务逻辑需求。
```
业务规则：
1. 超过 $50 的订单有资格享受免费配送
2. 低于 $50 的订单有 $5.99 的配送费
3. 国际订单根据目的地有可变费率
```

### 发布标准 vs 验收标准

虽然验收标准定义功能何时完成，**发布标准**定义何时准备好进行生产部署。

| 方面 | 验收标准 | 发布标准 |
|------|----------|----------|
| **关注点** | 功能功能 | 生产就绪性 |
| **何时** | 开发完成 | 部署前 |
| **谁验证** | 产品/QA | 工程/运维/安全 |
| **范围** | 单个故事 | 整个发布 |

#### 发布标准清单（Go/No-Go）

```markdown
## 发布标准

### 功能
- [ ] QA验证所有验收标准
- [ ] 关键路径用户流端到端测试
- [ ] 没有开放的P0或P1缺陷
- [ ] 功能标志配置正确

### 性能
- [ ] 负载测试完成（目标：1000并发用户）
- [ ] 负载下API P95延迟 < 200ms
- [ ] 24小时浸泡测试未检测到内存泄漏
- [ ] 数据库查询性能可接受

### 安全
- [ ] 安全审查完成
- [ ] 依赖项中没有关键漏洞
- [ ] 认证/授权测试完成
- [ ] PII处理符合隐私政策

### 监控与可观测性
- [ ] 错误跟踪已配置
- [ ] 性能监控仪表板已创建
- [ ] 告警阈值已配置
- [ ] 常见问题运行手册已创建

### 文档
- [ ] 用户文档已更新
- [ ] API文档已更新
- [ ] 发布说明已准备
- [ ] 回滚程序已记录

### 运维
- [ ] 在测试环境测试数据库迁移
- [ ] 可通过功能标志禁用功能
- [ ] 在测试环境测试回滚计划
- [ ] 支持团队已了解变更

### Go/No-Go决策
| 标准 | 状态 | 备注 |
|------|------|------|
| 功能完成 | ✅/❌ | |
| 性能可接受 | ✅/❌ | |
| 安全已批准 | ✅/❌ | |
| 监控就绪 | ✅/❌ | |
| **决策** | **GO / NO-GO** | |
```

### 优先级排序方法

#### MoSCoW 方法
使用 MoSCoW 方法对需求进行优先级排序：

##### Must Have（必须有）
- 对产品成功至关重要
- 不可协商
- 没有这些，产品无法工作

##### Should Have（应该有）
- 重要但不是关键
- 如有必要可以推迟
- 可能有变通方案

##### Could Have（可以有）
- 锦上添花
- 如果时间/资源允许则交付
- 通常在后续版本中削减

##### Won't Have (This Time)（这次不会有）
- 明确排除
- 已确认但不在范围内
- 可能是未来考虑

##### 优先级排序模板
```markdown
| 优先级 | 功能 | 理由 |
|--------|------|------|
| Must | 用户认证 | 没有登录就无法使用产品 |
| Must | 支付处理 | 收入所需 |
| Should | 社交登录 | 提高转化率，但邮箱可用 |
| Should | 发票生成 | 可用手动变通方案 |
| Could | 深色模式 | 不错的用户体验增强 |
| Could | 多币种 | 当前市场只有美元 |
| Won't | VR 支持 | MVP 范围之外 |
```

#### RICE 评分
定量优先级框架：

**公式**：RICE 分数 =（覆盖范围 × 影响 × 信心）/ 工作量

| 因子 | 描述 | 评分 |
|------|------|------|
| **R**each（覆盖范围） | 在给定时期内这将影响多少用户？ | 用户/季度（实际数字） |
| **I**mpact（影响） | 这将对单个用户产生多大影响？ | 3 = 巨大，2 = 高，1 = 中，0.5 = 低，0.25 = 最小 |
| **C**onfidence（信心） | 我们对估计有多大信心？ | 100% = 高，80% = 中，50% = 低 |
| **E**ffort（工作量） | 需要多少工作量？ | 人月 |

```markdown
### RICE 优先级

| 功能 | 覆盖范围（用户/季度） | 影响 | 信心 | 工作量（月） | RICE 分数 | 优先级 |
|------|---------------------|------|------|--------------|-----------|--------|
| 功能 A | 1000 | 3 | 80% | 2 | (1000×3×0.8)/2 = 1200 | 1 |
| 功能 B | 500 | 2 | 100% | 1 | (500×2×1)/1 = 1000 | 2 |
| 功能 C | 2000 | 1 | 50% | 3 | (2000×1×0.5)/3 = 333 | 3 |
```

#### 价值/工作量矩阵
基于价值与工作量的可视化优先级：

```
     高 │  快速胜利         │  重大项目
  价值  │  （先做）         │  （仔细规划）
        │                   │
        ├───────────────────┼───────────────────
        │  填充项           │  时间黑洞
        │  （最后做）       │  （避免）
     低 │                   │
        └───────────────────┴───────────────────
              低                 高
                    工作量
```

| 象限 | 策略 | 示例 |
|------|------|------|
| **快速胜利**（高价值，低工作量） | 优先做 | 缺陷修复、简单UX改进 |
| **重大项目**（高价值，高工作量） | 仔细规划 | 新功能、架构变更 |
| **填充项**（低价值，低工作量） | 有时间再做 | 小优化、锦上添花 |
| **时间黑洞**（低价值，高工作量） | 避免或推迟 | 价值不明朗的复杂功能 |

### 其他最佳实践

#### 避免技术术语
除非为技术受众编写，否则关注"什么"而非"如何"。

#### 包含视觉参考
- 线框图
- 流程图
- 原型
- 数据模型

#### 考虑边界情况
- 空状态
- 错误条件
- 最大数据负载
- 网络故障
- 并发用户

#### 保持文档版本控制
- 跟踪所有更改
- 维护变更日志
- 归档旧版本

#### 使其协作化
- 分享早期草稿
- 邀请反馈
- 根据输入进行迭代

---

## 评审与审批流程

### PRD 生命周期

```
草稿 → 评审 → 修订 → 批准 → 实施 → 更新
```

### 评审阶段

#### 1. 产品团队评审
**参与者**：产品经理、产品负责人、业务分析师
**重点**：完整性、清晰度、与战略的一致性
**检查清单**：
- [ ] 所有章节都完整
- [ ] 用户故事遵循 5W1H 格式
- [ ] 验收标准可测试
- [ ] 业务价值清晰
- [ ] 没有矛盾或遗漏

#### 2. 技术评审
**参与者**：工程负责人、架构师、高级开发人员
**重点**：可行性、技术约束、工作量估算
**检查清单**：
- [ ] 需求在技术上是可行的
- [ ] 架构考虑已解决
- [ ] 依赖已识别
- [ ] 非功能需求是现实的
- [ ] 风险已记录

#### 3. 设计评审
**参与者**：UX/UI 设计师、设计负责人
**重点**：用户体验、设计可行性
**检查清单**：
- [ ] 用户流程合乎逻辑
- [ ] 设计需求清晰
- [ ] 无障碍需求已覆盖
- [ ] 移动/响应需求已明确
- [ ] 品牌指南已引用

#### 4. 利益相关者评审
**参与者**：业务利益相关者、部门负责人、高管
**重点**：业务对齐、投资回报率、优先级
**检查清单**：
- [ ] 目标与业务目标一致
- [ ] 成功指标可衡量
- [ ] 时间线现实
- [ ] 资源需求已理解
- [ ] 投资回报率清晰

#### 5. QA 评审
**参与者**：QA 负责人、测试工程师
**重点**：可测试性、边界情况、质量标准
**检查清单**：
- [ ] 验收标准可测试
- [ ] 边界情况已记录
- [ ] 质量标准已定义
- [ ] 测试方法可行

### 敏捷团队的轻量级评审流程

对于实践持续交付或处理较小功能的团队，使用此简化流程：

```markdown
## 轻量级评审清单

### 异步评审（24-48小时窗口）
- [ ] 产品负责人评审完整性
- [ ] 技术负责人评审可行性
- [ ] 设计评审UX清晰度
- [ ] 至少一个利益相关者评审业务对齐

### 同步评审会议（最多30分钟）
**议程**：
1. 产品负责人讲解关键决策（5分钟）
2. 技术可行性讨论（10分钟）
3. 开放问题/澄清（10分钟）
4. Go/No-Go决策（5分钟）

### 审批
- 👍 = 批准继续
- 🤔 = 需要小修改（异步跟进）
- 🛑 = 需要重大修改（需要另一次评审）

### 何时使用轻量级流程
✅ 小功能（< 2周）
✅ 迭代改进
✅ 熟悉的领域
✅ 具有共享背景的成熟团队

### 何时使用完整流程
❌ 新产品发布
❌ 重大架构变更
❌ 跨团队依赖
❌ 高风险或合规相关功能
```

### 审批工作流

```markdown
| 阶段 | 审批人 | 需要签字 |
|------|--------|----------|
| 草稿完成 | 产品负责人 | 是 |
| 技术可行性 | 工程负责人 | 是 |
| 设计评审 | 设计负责人 | 是 |
| 业务对齐 | 执行发起人 | 是 |
| 最终批准 | 产品总监 | 是 |
```

### 变更管理

#### 次要变更
- 拼写错误、澄清、格式
- 作者可以直接修改
- 更新版本号（补丁：1.0.1）

#### 中等变更
- 新需求、范围调整
- 需要受影响的团队评审
- 更新版本号（次要：1.1.0）

#### 重大变更
- 重大范围变更、时间线变动
- 需要完整的重新评审流程
- 更新版本号（主要：2.0.0）

### 版本控制最佳实践

```markdown
### 变更日志

| 版本 | 日期 | 作者 | 更改 | 审批人 |
|------|------|------|------|--------|
| 1.0.0 | 2024-01-15 | Jane Smith | 初始 PRD | John Doe |
| 1.1.0 | 2024-01-22 | Jane Smith | 添加导出功能需求 | John Doe |
| 1.1.1 | 2024-01-25 | Jane Smith | 修复拼写错误，澄清 AC | - |
```

---

## PRD 模板示例

### 模板 1：新产品 PRD

```markdown
# 产品需求文档：[产品名称]

**版本**：1.0.0
**日期**：2024-01-15
**作者**：[产品负责人]
**状态**：草稿

---

## 1. 执行摘要

### 1.1 产品愿景
[一句话愿景声明]

### 1.2 问题陈述
[我们要解决什么问题？]

### 1.3 解决方案概述
[解决方案的高层描述]

### 1.4 目标市场
[谁会使用这个产品？]

### 1.5 成功指标
- 指标 1：[目标值]
- 指标 2：[目标值]

---

## 2. 目标与目的

### 2.1 业务目标
1. [目标 1 及可衡量的结果]
2. [目标 2 及可衡量的结果]

### 2.2 产品目标
1. [目标 1]
2. [目标 2]

### 2.3 关键结果（OKRs）
- KR1：[具体、可衡量的结果]
- KR2：[具体、可衡量的结果]

---

## 3. 范围外事项

| 项目 | 原因 | 未来考虑 |
|------|------|----------|
| [功能 X] | [排除原因] | [何时考虑] |

---

## 4. 假设

| ID | 假设 | 验证 | 负责人 | 截止日期 | 状态 |
|----|------|------|--------|----------|------|
| A-01 | [假设] | [方法] | [姓名] | [日期] | 待验证 |

---

## 5. 用户画像

### 5.1 主要画像：[名称]
- **角色**：[职位]
- **人口统计**：[年龄、地区等]
- **目标**：[他们想要实现什么]
- **痛点**：[当前的挫折]
- **语录**："[代表性陈述]"

### 5.2 次要画像：[名称]
...

---

## 6. 用户故事

### 史诗 1：[史诗名称]

#### 故事 1.1
**作为** [谁]，**当** [何时]，**在** [何地]，
**我想要** [做什么]，**以便** [为什么]。

**验收标准：**
- [ ] 标准 1
- [ ] 标准 2
- [ ] 标准 3

**优先级**：[Must/Should/Could/Won't]
**故事点**：[工作量估算]

#### 故事 1.2
...

### 史诗 2：[史诗名称]
...

---

## 7. 功能需求

### 7.1 功能集 A
#### FR-001：[需求名称]
**描述**：[详细描述]
**优先级**：[Must/Should/Could/Won't]
**用户故事**：[相关故事 ID]

#### FR-002：[需求名称]
...

### 7.2 功能集 B
...

---

## 8. 非功能需求

### 8.1 性能
- [性能需求 1]
- [性能需求 2]

### 8.2 安全性
- [安全需求 1]
- [安全需求 2]

### 8.3 可扩展性
- [可扩展性需求 1]
- [可扩展性需求 2]

### 8.4 可靠性
- [可靠性需求 1]
- [可靠性需求 2]

---

## 9. 数据与分析需求

### 9.1 事件跟踪
| 事件 | 触发 | 属性 |
|------|------|------|
| [event_name] | [trigger] | [properties] |

### 9.2 指标
- [指标 1]：[定义和目标]

### 9.3 仪表板
- [仪表板 1]：[受众和组件]

---

## 10. 设计需求

### 10.1 用户体验
- [UX 需求 1]
- [UX 需求 2]

### 10.2 视觉设计
- [设计需求 1]
- [设计需求 2]

### 10.3 技术架构
- [架构需求 1]
- [架构需求 2]

---

## 11. 时间线与路线图

### 第一阶段：MVP（第 1-2 个月）
- 功能 1
- 功能 2
**成功标准**：[可衡量的结果]

### 第二阶段：增长（第 3-4 个月）
- 功能 3
- 功能 4
**成功标准**：[可衡量的结果]

### 第三阶段：扩展（第 5-6 个月）
- 功能 5
- 性能优化
**成功标准**：[可衡量的结果]

---

## 12. 成功指标

### 12.1 主要指标
- **指标名称**：[定义]
  - 基线：[当前值]
  - 目标：[目标值]
  - 时间线：[何时实现]

### 12.2 次要指标
...

### 12.3 反向指标
...

---

## 13. 发布标准

### 13.1 功能
- [ ] 所有验收标准已验证
- [ ] 没有关键缺陷

### 13.2 性能
- [ ] 通过负载测试
- [ ] 满足延迟要求

### 13.3 Go/No-Go决策
**状态**：[GO / NO-GO]
**日期**：[日期]
**审批人**：[姓名]

---

## 14. 开放问题与风险

### 14.1 开放问题
1. [问题 1]
2. [问题 2]

### 14.2 风险
| 风险 | 可能性 | 影响 | 缓解措施 |
|------|--------|------|----------|
| [风险 1] | 高/中/低 | 高/中/低 | [策略] |
| [风险 2] | 高/中/低 | 高/中/低 | [策略] |

---

## 15. 依赖

### 15.1 技术依赖
- [依赖 1]
- [依赖 2]

### 15.2 业务依赖
- [依赖 1]
- [依赖 2]

### 15.3 外部依赖
- [依赖 1]
- [依赖 2]

---

## 16. 附录

### 16.1 术语表
- **术语 1**：[定义]
- **术语 2**：[定义]

### 16.2 参考
- [研究链接]
- [设计链接]
- [相关文档链接]

### 16.3 变更日志
| 版本 | 日期 | 作者 | 更改 |
|------|------|------|------|
| 1.0.0 | 2024-01-15 | [姓名] | 初始版本 |
```

### 模板 2：功能 PRD

```markdown
# 功能需求文档：[功能名称]

**版本**：1.0.0
**日期**：2024-01-15
**作者**：[产品负责人]
**状态**：草稿
**相关 PRD**：[父 PRD 链接]

---

## 1. 概述

### 1.1 功能摘要
[功能的简要描述]

### 1.2 业务理由
[我们为什么要构建这个？]

### 1.3 成功标准
- [ ] [标准 1]
- [ ] [标准 2]

---

## 2. 范围外事项

[明确不包含的内容]

---

## 3. 假设

| ID | 假设 | 状态 |
|----|------|------|
| A-01 | [假设] | 待验证 |

---

## 4. 用户故事

### 主要用户故事
**作为** [谁]，**当** [何时]，**在** [何地]，
**我想要** [做什么]，**以便** [为什么]。

**验收标准：**
- [ ] [标准 1]
- [ ] [标准 2]
- [ ] [标准 3]

**优先级**：Must
**工作量**：[故事点或时间估算]

### 次要用户故事
...

---

## 5. 功能规格

### 5.1 用户流程
[逐步描述或图表引用]

### 5.2 UI 组件
| 组件 | 描述 | 行为 |
|------|------|------|
| [组件 1] | [描述] | [行为] |
| [组件 2] | [描述] | [行为] |

### 5.3 业务规则
1. [规则 1]
2. [规则 2]

### 5.4 边界情况
| 场景 | 预期行为 |
|------|----------|
| [边界情况 1] | [行为] |
| [边界情况 2] | [行为] |

---

## 6. 技术需求

### 6.1 API 需求
[API 规范或引用]

### 6.2 数据需求
[数据模型、模式变更]

### 6.3 集成点
[第三方集成]

### 6.4 性能需求
- [需求 1]
- [需求 2]

---

## 7. 数据与分析

### 7.1 要跟踪的事件
| 事件 | 属性 |
|------|------|
| [event] | [props] |

### 7.2 成功指标
- [指标 1]
- [指标 2]

---

## 8. 设计

### 8.1 线框图/原型
[设计链接]

### 8.2 交互设计
[关键交互和动画]

### 8.3 响应式行为
[移动、平板、桌面差异]

---

## 9. 测试考虑

### 9.1 测试场景
1. [场景 1]
2. [场景 2]

### 9.2 测试数据需求
[测试需要什么数据]

### 9.3 浏览器/设备测试
[支持的浏览器/设备列表]

---

## 10. 发布标准

### 10.1 Go/No-Go 清单
- [ ] [标准 1]
- [ ] [标准 2]

### 10.2 发布计划
[分阶段发布、功能标志等]

### 10.3 监控
[发布后监控什么]

### 10.4 回滚计划
[如果出现问题，如何处理]

---

## 11. 时间线

| 里程碑 | 日期 | 负责人 |
|--------|------|--------|
| 设计完成 | [日期] | [负责人] |
| 开发开始 | [日期] | [负责人] |
| QA 完成 | [日期] | [负责人] |
| 发布 | [日期] | [负责人] |

---

## 12. 开放事项

| 事项 | 负责人 | 截止日期 | 状态 |
|------|--------|----------|------|
| [事项 1] | [负责人] | [日期] | 开放 |
| [事项 2] | [负责人] | [日期] | 开放 |
```

### 模板 3：冲刺规划指南

```markdown
# 冲刺规划指南：[冲刺名称]

**冲刺**：[编号/名称]
**日期**：[开始日期] - [结束日期]
**目标**：[一句话冲刺目标]
**产品负责人**：[姓名]
**Scrum 主管**：[姓名]

---

## 1. 冲刺目标
[我们这个冲刺旨在实现什么]

---

## 2. 用户故事

### 故事 1：[标题]
**作为** [谁]，**我想要** [做什么]，**以便** [为什么]。

**验收标准：**
- [ ] [标准 1]
- [ ] [标准 2]

**优先级**：Must
**故事点**：[X]
**负责人**：[姓名]

### 故事 2：[标题]
...

---

## 3. 冲刺待办

| ID | 故事 | 点数 | 负责人 | 状态 |
|----|------|------|--------|------|
| 1 | [故事 1] | 5 | [姓名] | 待办 |
| 2 | [故事 2] | 3 | [姓名] | 待办 |

---

## 4. 完成定义

- [ ] 代码已编写并评审
- [ ] 单元测试通过（>80% 覆盖率）
- [ ] 集成测试通过
- [ ] QA 验收标准满足
- [ ] 文档已更新
- [ ] 产品负责人批准

---

## 5. 依赖和阻塞

| 依赖 | 状态 | 负责人 | 备注 |
|------|------|--------|------|
| [依赖 1] | [状态] | [负责人] | [备注] |
| [阻塞 1] | [状态] | [负责人] | [备注] |

---

## 6. 备注和决策

- [决策 1]
- [决策 2]

---

## 7. 回顾备注

### 做得好的
- [事项 1]
- [事项 2]

### 可以改进的
- [事项 1]
- [事项 2]

### 行动项
| 行动 | 负责人 | 截止日期 |
|------|--------|----------|
| [行动 1] | [负责人] | [日期] |
```

---

## 快速参考检查清单

### 开始 PRD 之前
- [ ] 理解业务问题
- [ ] 识别关键利益相关者
- [ ] 研究用户需求
- [ ] 审查现有文档

### PRD 编写期间
- [ ] 遵循用户故事的 5W1H 格式
- [ ] 包括具体的、可衡量的验收标准
- [ ] 考虑边界情况
- [ ] 记录假设
- [ ] 定义什么在范围外
- [ ] 使用 MoSCoW 优先级

### 定稿之前
- [ ] 审查清晰度和完整性
- [ ] 与利益相关者验证
- [ ] 获得技术可行性确认
- [ ] 检查矛盾
- [ ] 确保可测试性

### 批准之后
- [ ] 与团队分享
- [ ] 安排启动会议
- [ ] 设置跟踪/工单
- [ ] 计划评审节奏

---

## 总结

本 PRD 指南为产品负责人提供了一个全面的框架，用于创建清晰、可操作且有效的产品需求。通过遵循基于经典问题解决方法的 5W1H 框架（何人、何时、何地、何事、为何、如何），并结合 Atlassian 和现代敏捷方法论的最佳实践，您可以：

1. **减少歧义**：清晰的需求带来更好的实现
2. **改善协作**：跨团队的共享理解
3. **提高成功率**：定义明确的需求更有可能满足用户需求
4. **实现更好的估算**：详细的故事允许准确的工作量估算
5. **促进测试**：可测试的验收标准确保质量

记住：PRD 是一个活的文档。随着您了解更多关于用户和产品的信息，进行迭代、收集反馈并更新。

---

*文档版本：2.0.0*
*最后更新：2024*
